{"ast":null,"code":"import _objectSpread from\"D:/evento_app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{API_URL}from'../api';import logo from\"../assets/logo.png\";// âœ… asegÃºrate de tener este archivo\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Registro(){const[form,setForm]=useState({nombre:'',cedula:'',email:'',cargo:'',entidad:''});const[qr,setQr]=useState(null);const[mensaje,setMensaje]=useState('');const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const handleSubmit=async e=>{e.preventDefault();setMensaje('');setQr(null);try{const{data}=await axios.post(\"\".concat(API_URL,\"/inscripcion\"),form);// âœ… Mostrar mensaje y QR devuelto (nuevo o existente)\nsetQr(data.qrCode);setMensaje(data.mensaje||'InscripciÃ³n registrada exitosamente');}catch(error){var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===409){// 409 = ya estÃ¡ registrada\nsetMensaje(error.response.data.error);}else{console.error(error);setMensaje('âŒ Error al registrar la inscripciÃ³n. Intenta de nuevo.');}}};const handleDescargar=()=>{if(!qr)return;const link=document.createElement('a');const nombreArchivo=\"qr_\".concat(form.nombre.replace(/\\s+/g,'_'),\"_\").concat(form.cedula,\".png\");link.href=qr;link.download=nombreArchivo;document.body.appendChild(link);link.click();document.body.removeChild(link);};return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",padding:\"30px\",background:\"linear-gradient(135deg, #00C3FF, #004E92)\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",padding:40,borderRadius:16,boxShadow:\"0 6px 20px rgba(0,0,0,0.2)\",textAlign:\"center\",width:\"90%\",maxWidth:480},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Logo Aries\",style:{width:180,marginBottom:20}}),/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#004E92\",marginBottom:20},children:\"Registro al Evento\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:'grid',gap:'2px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"input\",{name:\"nombre\",placeholder:\"Nombre completo\",value:form.nombre,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"cedula\",placeholder:\"C\\xE9dula\",value:form.cedula,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",placeholder:\"Email\",type:\"email\",value:form.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"cargo\",placeholder:\"Cargo / Rol\",value:form.cargo,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{name:\"entidad\",placeholder:\"Entidad / Empresa\",value:form.entidad,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:\"100%\",padding:\"10px 12px\",background:\"linear-gradient(90deg, #00C3FF, #004E92)\",color:\"white\",border:\"none\",borderRadius:8,cursor:\"pointer\",fontWeight:\"bold\"},children:\"Registrar\"})]}),mensaje&&/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:'bold',color:mensaje.includes('registrada')?'orange':'green'},children:mensaje})]}),qr&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"C\\xF3digo QR generado:\"}),/*#__PURE__*/_jsx(\"img\",{src:qr,alt:\"QR de confirmaci\\xF3n\",style:{width:'100%',height:'auto',maxWidth:'600px',border:'1px solid #ccc',borderRadius:'1px',padding:'1px',backgroundColor:'white',display:'block',margin:'0 auto'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDescargar,style:{marginTop:'15px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'8px',padding:'10px 20px',cursor:'pointer',fontSize:'16px'},children:\"\\uD83D\\uDCE5 Descargar QR\"})]})]})});}","map":{"version":3,"names":["React","useState","axios","API_URL","logo","jsx","_jsx","jsxs","_jsxs","Registro","form","setForm","nombre","cedula","email","cargo","entidad","qr","setQr","mensaje","setMensaje","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","data","post","concat","qrCode","error","_error$response","response","status","console","handleDescargar","link","document","createElement","nombreArchivo","replace","href","download","body","appendChild","click","removeChild","style","display","alignItems","justifyContent","padding","background","children","borderRadius","boxShadow","textAlign","width","maxWidth","src","alt","marginBottom","color","onSubmit","gap","placeholder","onChange","required","type","border","cursor","fontWeight","includes","height","backgroundColor","margin","onClick","marginTop","fontSize"],"sources":["D:/evento_app/frontend/src/pages/Registro.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { API_URL } from '../api';\nimport logo from \"../assets/logo.png\"; // âœ… asegÃºrate de tener este archivo\n\nexport default function Registro() {\n  const [form, setForm] = useState({\n    nombre: '',\n    cedula: '',\n    email: '',\n    cargo: '',\n    entidad: ''\n  });\n  const [qr, setQr] = useState(null);\n  const [mensaje, setMensaje] = useState('');\n\n  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMensaje('');\n    setQr(null);\n\n    try {\n      const { data } = await axios.post(`${API_URL}/inscripcion`, form);\n\n      // âœ… Mostrar mensaje y QR devuelto (nuevo o existente)\n      setQr(data.qrCode);\n      setMensaje(data.mensaje || 'InscripciÃ³n registrada exitosamente');\n\n    } catch (error) {\n      if (error.response?.status === 409) {\n        // 409 = ya estÃ¡ registrada\n        setMensaje(error.response.data.error);\n      } else {\n        console.error(error);\n        setMensaje('âŒ Error al registrar la inscripciÃ³n. Intenta de nuevo.');\n      }\n    }\n  };\n\n  const handleDescargar = () => {\n    if (!qr) return;\n    const link = document.createElement('a');\n    const nombreArchivo = `qr_${form.nombre.replace(/\\s+/g, '_')}_${form.cedula}.png`;\n    link.href = qr;\n    link.download = nombreArchivo;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        padding: \"30px\",\n        background: \"linear-gradient(135deg, #00C3FF, #004E92)\",\n      }}\n    >\n      <div\n        style={{\n          background: \"white\",\n          padding: 40,\n          borderRadius: 16,\n          boxShadow: \"0 6px 20px rgba(0,0,0,0.2)\",\n          textAlign: \"center\",\n          width: \"90%\",\n          maxWidth: 480,\n        }}\n      >\n        \n      <div>\n        <img src={logo} alt=\"Logo Aries\" style={{ width: 180, marginBottom: 20 }} />\n        <h2 style={{ color: \"#004E92\", marginBottom: 20 }}>Registro al Evento</h2>\n\n        <form onSubmit={handleSubmit} style={{ display: 'grid', gap: '2px', marginBottom: '15px' }}>\n          <input name=\"nombre\" placeholder=\"Nombre completo\" value={form.nombre} onChange={handleChange} required />\n          <input name=\"cedula\" placeholder=\"CÃ©dula\" value={form.cedula} onChange={handleChange} required />\n          <input name=\"email\" placeholder=\"Email\" type=\"email\" value={form.email} onChange={handleChange} required />\n          <input name=\"cargo\" placeholder=\"Cargo / Rol\" value={form.cargo} onChange={handleChange} />\n          <input name=\"entidad\" placeholder=\"Entidad / Empresa\" value={form.entidad} onChange={handleChange} />\n          <button\n            type=\"submit\"\n            style={{\n                width: \"100%\",\n                padding: \"10px 12px\",\n                background: \"linear-gradient(90deg, #00C3FF, #004E92)\",\n                color: \"white\",\n                border: \"none\",\n                borderRadius: 8,\n                cursor: \"pointer\",\n                fontWeight: \"bold\",\n              }}\n          >\n            Registrar\n          </button>\n        </form>\n\n        {mensaje && <p style={{ fontWeight: 'bold', color: mensaje.includes('registrada') ? 'orange' : 'green' }}>{mensaje}</p>}\n      </div>\n\n      {qr && (\n        <div>\n          <h3>CÃ³digo QR generado:</h3>\n          <img\n            src={qr}\n            alt=\"QR de confirmaciÃ³n\"\n            style={{\n              width: '100%',\n              height: 'auto',\n              maxWidth: '600px',\n              border: '1px solid #ccc',\n              borderRadius: '1px',\n              padding: '1px',\n              backgroundColor: 'white',\n              display: 'block',\n              margin: '0 auto'\n            }}\n          />\n          <button\n            onClick={handleDescargar}\n            style={{\n              marginTop: '15px',\n              backgroundColor: '#007bff',\n              color: 'white',\n              border: 'none',\n              borderRadius: '8px',\n              padding: '10px 20px',\n              cursor: 'pointer',\n              fontSize: '16px'\n            }}\n            >\n            ðŸ“¥ Descargar QR\n          </button>\n        </div>\n      )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}